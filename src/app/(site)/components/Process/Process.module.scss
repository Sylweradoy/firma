@use "sass:color";
@use "styles/index" as *;

.process {
  @include container;
  padding-block: clamp(40px, 8vw, 110px);
  display: grid;
  gap: clamp(24px, 4vw, 48px);
}

.header {
  text-align: center;
  display: grid;
  gap: space(2);
}
.overline {
  font-size: clamp(12px, 1.4vw, 14px);
  letter-spacing: .16em;
  text-transform: uppercase;
  color: $color-muted;
  margin: 0;
}
.title {
  margin: 0;
  font-family: $font-brand;
  font-weight: $weight-bold;
  line-height: 1.04;
  font-size: clamp(28px, 6.5vw, 56px);
}
.lead {
  margin: 0 auto;
  max-width: 78ch;
  opacity: .92;
  font-size: clamp(15px, 2.1vw, 18px);
}

.slider {
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 8px;
}

.arrow {
  --offset-x: -6px; --offset-y: 6px;
  width: 40px; height: 40px;
  display: grid; place-items: center;
  background: $white; color: $color-accent;
  border: 0; border-radius: radius(md);
  cursor: pointer; isolation: isolate;
  position: relative;
  transition: background-color .15s ease, color .15s ease, transform .12s ease;

  &::after {
    content: ""; position: absolute; inset: 0;
    border: 1.5px solid $color-accent; border-radius: inherit;
    transform: translate(var(--offset-x), var(--offset-y));
    transition: transform .18s ease;
    z-index: -1;
  }
  &:hover:not(:disabled)::after { transform: translate(0,0); }
  &:active { transform: translate(-1px, 1px); }
  &:focus-visible { @include focus-ring; }
  &:disabled { opacity: .45; cursor: not-allowed; }
}

/* === TRACK === */
.track {
  display: grid;
  grid-auto-flow: column;

  /* mniejsze, zgrabne kafelki + elastyczny odstęp */
  --gap: clamp(10px, 3vw, 16px);
  --cardW: clamp(240px, 78vw, 200px);   /* było ~84vw/520px */

  grid-auto-columns: var(--cardW);
  gap: var(--gap);

  overflow-x: auto;
  overflow-y: visible;

  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  overscroll-behavior-x: contain;
  -webkit-overflow-scrolling: touch;

  padding: 6px 0 16px;

  scrollbar-width: none;
  &::-webkit-scrollbar { display: none; }

  /* desktop stopniowo węższe (żeby były krótsze i nie „długie”) */
  @include mq(md) { --cardW: clamp(300px, 56vw, 360px); }
  @include mq(lg) { --cardW: clamp(340px, 44vw, 400px); }
}


/* === KARTA === */
.card {
  inline-size: var(--cardW);
  max-inline-size: 100%;
  box-sizing: border-box;

  scroll-snap-align: center;
  scroll-snap-stop: always;
  scroll-margin-inline: calc((100% - var(--cardW)) / 2);

  background: color.change($white, $alpha: .05);
  border: 1px solid $color-border;
  border-radius: radius(xl);

  /* mniej pionowego „powietrza” → karta krótsza */
  padding: clamp(12px, 2.5vw, 20px);

  display: grid;
  gap: space(2);

  transition: transform .18s ease, border-color .2s ease, background-color .2s ease;
  &:hover {
    transform: translateY(-3px);
    background: color.change($white, $alpha: .07);
    border-color: color.change($color-accent, $alpha: .7);
  }
}

.stepHead {
  display: grid; grid-template-columns: auto auto 1fr; align-items: center; gap: 10px;
}
.stepNo {
  font-size: 12px; padding: 6px 8px;
  border: 1px solid $color-border; border-radius: radius(pill);
  background: color.change($white, $alpha: .04);
  color: $color-muted;
}
.stepIcon {
  width: 36px; height: 36px; display: grid; place-items: center;
  border: 1px solid $color-border; border-radius: radius(lg);
  background: color.change($white, $alpha: .06);
  color: $color-accent;
}
.stepShort {
  justify-self: end; font-size: 12px; color: $color-muted;
}

.cardTitle {
  margin: 4px 0 0;
  font-weight: $weight-bold;
  font-size: clamp(18px, 2.8vw, 22px);
}
.points {
  margin: 0; padding-left: 18px;
  li { margin: 4px 0; font-size: clamp(14px, 2.2vw, 16px); }
}

.progressWrap {
  display: grid; gap: 10px;
}
.progressBar {
  height: 3px; width: 0%;
  background: $color-accent; border-radius: 999px;
  transition: width .25s ease;
}
.dots {
  display: flex; flex-wrap: wrap; gap: 6px; justify-content: center;
}
.dot, .dotActive {
  width: 8px; height: 8px; border-radius: 50%;
  background: color.change($white, $alpha: .2); border: 1px solid $color-border;
  cursor: pointer;
  transition: transform .12s ease, background-color .15s ease, border-color .15s ease;
  &:focus-visible { @include focus-ring; }
  &:hover { transform: scale(1.08); }
}
.dotActive { background: $color-accent; border-color: color.change($color-accent, $alpha: .8); }

.cta { display: flex; justify-content: center; }

.cardTitle,
.points li {
  overflow-wrap: anywhere;
  hyphens: auto;
}

@media (max-width: 420px) {
  .stepIcon { width: 32px; height: 32px; }
  .stepShort { font-size: 11px; }
  .cardTitle { font-size: clamp(16px, 5.5vw, 20px); }
  .points li { font-size: clamp(13px, 4.4vw, 15px); margin: 2px 0; line-height: 1.35; }
}

/* na bardzo małych — zyskaj miejsce ukrywając „krótki tytuł” w nagłówku */
@media (max-width: 360px) {
  .stepShort { display: none; }
  .track { --cardW: clamp(220px, 86vw, 200px); } /* karta trochę węższa = na pewno się mieści */
}